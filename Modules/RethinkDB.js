/* * RethinkDB via Recli * http://rethinkdb.com/ * https://github.com/stiang/recli*/// defaultsvar OPTIONS = { 	"-h": "localhost",  // host					"-p": "28015",  // host					"-d": "test" }		// databasevar execute = function(expression, options) {	// output	var result = {		'console':{			'input':'',			'output':null,				'error':''},		'worker':{			'hasStarted':false,			'exitStatus':null,			'forced':null}	};		// input	options 	= options || OPTIONS;	result.console.input = "recli -r"			 	+ " -h " + options["-h"]				+ " -p " + options["-p"]				+ " -d " + options["-d"]				+ " " + expression;					// worker	var worker = new SystemWorker(result.console.input);	worker.onmessage = function(output) {		result.console.output = output.data;	};			worker.onerror = function(error){		try{			result.console.error = error;		}		catch(e){			result.console.error = error		}	};		worker.onterminated = function(e){		result.worker.hasStarted = e.hasStarted;		result.worker.exitStatus = e.exitStatus;		result.worker.forced = e.forced;					exitWait();	};		if(typeof expression === 'string'){		worker.postMessage(expression, options);		worker.endOfInput();	};				worker.wait();		return result;};// exportsexports.recli = function(expression, options){	return execute(expression, options);};