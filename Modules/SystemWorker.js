/* * Generic system worker module. * Usually called by a parent module responsible for formatting input string but can be called directly.*/exports.execute = function(input) {	// output	var result = {		'console':{			'input':input,			'output':null,				'error':''},		'worker':{			'hasStarted':false,			'exitStatus':null,			'forced':null}	};					// worker	var worker = new SystemWorker(input);	worker.onmessage = function(output) {		result.console.output = output.data;	};			worker.onerror = function(error){		try{			result.console.error = error;		}		catch(e){			result.console.error = error		}	};		worker.onterminated = function(e){		result.worker.hasStarted = e.hasStarted;		result.worker.exitStatus = e.exitStatus;		result.worker.forced = e.forced;					exitWait();	};		if(typeof expression === 'string'){		worker.postMessage(expression, options);		worker.endOfInput();	};				worker.wait();		return result;};